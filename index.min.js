import t from"axios";async function i(i,r){const e={url:i,status:!0,errorMsg:"",iconUrl:"",title:"",description:""};if(!i)return e;try{const{origin:n,protocol:c}=new URL(i),o=(await t.get(n,{...r})).data;e.iconUrl=function(t,i,r){r=r.replace(":","");const e=/<link .*?href="(.*?)"/i,n=t.match(/<link .*?href="(.*?)"/gi);if(Array.isArray(n))for(const t of n)if(t.includes('rel="icon"')||t.includes("rel=icon")||t.includes("rel='icon'")||t.includes('rel="shortcut icon"')||t.includes("rel='shortcut icon'")||t.includes("rel='icon shortcut'")||t.includes('rel="icon shortcut"')||t.includes('rel="apple-touch-icon-precomposed"')||t.includes("rel='apple-touch-icon-precomposed'")||t.includes('rel="apple-touch-icon"')||t.includes("rel='apple-touch-icon'")){const n=t.match(e);if(n&&n[1]){let t=n[1];if(t.startsWith("data:image"))return t;if(t.startsWith("://"))return r+t;if(t.startsWith("//"))return r+":"+t;if(t.includes("://"))return t;if(t.startsWith("/"))return i+t;if(!t.startsWith("/"))return i+"/"+t;break}}return""}(o,n,c).trim(),e.title=function(t){const i=t.match(/<title>([^<]*)?<\/title>/i);let r="";return i&&i[1]&&(r=i[1]),r}(o).trim(),e.description=function(t){const i=/<meta .*?content="(.*?)"/i,r=t.match(/<meta .*?content="(.*?)"/gi);let e="";if(Array.isArray(r))for(const t of r)if(t.includes('name="description"')||t.includes("name=description")||t.includes("name='description'")){const r=t.match(i);if(r&&r[1]){e=r[1];break}}return e}(o).trim()}catch(t){e.errorMsg=t.message,e.status=!1}return e}export{i as default};
